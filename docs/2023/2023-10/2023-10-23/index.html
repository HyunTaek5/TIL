<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-2023/2023-10/2023-10-23" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">2023-10-23 @ HyunTaek Oh</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://HyunTaek5.github.io/TIL/docs/2023/2023-10/2023-10-23"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2023-10-23 @ HyunTaek Oh"><meta data-rh="true" name="description" content="사이드 프로젝트 배포 이슈 정리"><meta data-rh="true" property="og:description" content="사이드 프로젝트 배포 이슈 정리"><link data-rh="true" rel="icon" href="/TIL/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://HyunTaek5.github.io/TIL/docs/2023/2023-10/2023-10-23"><link data-rh="true" rel="alternate" href="https://HyunTaek5.github.io/TIL/docs/2023/2023-10/2023-10-23" hreflang="en"><link data-rh="true" rel="alternate" href="https://HyunTaek5.github.io/TIL/docs/2023/2023-10/2023-10-23" hreflang="x-default"><link rel="stylesheet" href="/TIL/assets/css/styles.b255efff.css">
<link rel="preload" href="/TIL/assets/js/runtime~main.0e517ad4.js" as="script">
<link rel="preload" href="/TIL/assets/js/main.58870c16.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TIL/"><div class="navbar__logo"><img src="/TIL/img/favicon.png" alt="HyunTaek Oh Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/TIL/img/favicon.png" alt="HyunTaek Oh Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">8:20 TIL</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">TIL</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/TIL/docs/intro">Hi 👋🏻</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/TIL/docs/2023/2023-10/2023-10-23">Today 🌤</a></li></ul></div><a href="https://hyuntaek5.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">About</a><a href="https://eight20.tistory.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Dev Logs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/HyunTaek5" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://linkedin.com/in/dylanoh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-linkedin-link" aria-label="LinkedIn Account">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TIL/docs/intro">📚 Welcome to My TIL</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/TIL/docs/2023/2023-09/2023-09-12">2023</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/TIL/docs/2023/2023-09/2023-09-12">2023-09</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-01">2023-10</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-01">2023-10-01</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-03">2023-10-03</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-04">2023-10-04</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-10">2023-10-10</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-11">2023-10-11</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-14">2023-10-14</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-16">2023-10-16</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-21">2023-10-21</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/TIL/docs/2023/2023-10/2023-10-23">2023-10-23</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/TIL/docs/events/구름 Commit - SRE">events</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/TIL/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">2023</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">2023-10</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">2023-10-23</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>사이드 프로젝트 배포 회고 기록</h1><p>사이드 프로젝트 배포 이슈 정리</p><p>기존에 작업하던 <a href="https://github.com/Fashion-Cloud" target="_blank" rel="noopener noreferrer">사이드 프로젝트</a> POC 발표 기간이 별로 남지 않았고, AWS 비용 지원도 나와서 <a href="https://cloudtype.io/" target="_blank" rel="noopener noreferrer">CloudType</a>, <a href="https://neon.tech/" target="_blank" rel="noopener noreferrer">Neon</a> 조합으로 무료 플랜을 활용해서 배포해두었던 백엔드 인프라를 AWS 기반으로 마이그레이션하고, 프론트 신규 배포를 진행하였다. 배포하면서 여러 이슈 상황이 있었는데 해당 히스토리를 정리해두었다.</p><p>AWS 서비스의 경우, 기존에 static 파일 저장 스토리지 용도로 사용하던 S3를 유지한 채, EC2를 추가적으로 사용하였다. EC2 인스턴스 유형의 경우, 유효한 트래픽이 없는 상태에서 RDS 서비스를 사용하기에는 비용적으로 팀원들에게 부담이 되므로 DB를 인스턴스 내부에 docker 컨테이너로 띄울 계획으로 vCPU가 2개에 메모리가 2Gib인 t3.small를 사용하였다.</p><p>DNS의 경우, CloudFlare에서 도메인을 사두었고, SSL/TLS 설정시 편의성을 위해 CloudFlare를 사용하였다. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-nginx-도커-컨테이너-conf-적용-이슈">1. NGINX 도커 컨테이너 conf 적용 이슈<a href="#1-nginx-도커-컨테이너-conf-적용-이슈" class="hash-link" aria-label="Direct link to 1. NGINX 도커 컨테이너 conf 적용 이슈" title="Direct link to 1. NGINX 도커 컨테이너 conf 적용 이슈">​</a></h2><p>SpringBoot 기반 백엔드, Redis, DB, NGINX 총 3개의 서비스를 docker-compose를 사용해서 관리하려했는데 NGINX 컨테이너에서 아래와 같은 에러코드가 발생하면서 exitCode 1과 함께 컨테이너가 내려가는 이슈가 발생하였다.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/docker-entrypoint.sh: Looking </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token for-or-select variable" style="color:rgb(189, 147, 249);font-style:italic">shell</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> /docker-entrypoint.d/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>해당 원인은 nginx 도커파일과 사용하려던 nginx.conf 파일의 설정이 잘못되어 있어서 nginx가 실행되지 않고, 에러를 발생시켜 생기는 이슈였다. 해당 이슈로 NGINX 이미지를 docker-compose.yml에서 제거한 후, 인스턴스 내부에 직접 NGINX를 설치하여 /etc/nginx/conf.d 폴더 내부에 prod.conf로 웹서버 설정을 직접 잡아주는 방식으로 처리하였다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-vercel-배포시-dns-err_too_many_redirects-이슈">2. Vercel 배포시 DNS &quot;err_too_many_redirects&quot; 이슈<a href="#2-vercel-배포시-dns-err_too_many_redirects-이슈" class="hash-link" aria-label="Direct link to 2. Vercel 배포시 DNS &quot;err_too_many_redirects&quot; 이슈" title="Direct link to 2. Vercel 배포시 DNS &quot;err_too_many_redirects&quot; 이슈">​</a></h2><p>프론트엔드의 경우, NextJs 기반으로 작동하므로 NextJs 프레임워크를 만든 Vercel에 배포하는 것이 안정성 측면이나 CI/CD 설정 측면에서도 편의성을 가져갈 수 있다고 판단하였다. Vercel과 Github 프론트엔드 레포를 연동하고, build해서 vercel 자체적인 도메인으로 정상적으로 접근가능한 것까지 확인 후, 구매하였던 도메인과 연동하였는데 해당 도메인으로 접근시 &quot;err_too_many_redirects&quot; 페이지가 뜨면서 페이지로 접근이 불가하였다. </p><p>해당 이슈의 원인은 CloudFlare SSL/TLS 설정 문제였다. CloudFlare의 SSL/TLS 설정을 가변 옵션으로 설정해두고 쓰고 있었는데 가변 옵션 사용시, CloudFlare가 HTTP로 Vercel 배포 주소에 접근 후, Vercel의 응답에 따라 HTTPS를 사용해서 응답을 포워딩해주는 방식이었다. 여기서 문제는 Vercel이 CloudFlare로 응답할 때, 자동으로 HTTP 요청을 HTTPS로 업그레이드하여 308 코드를 전송하므로 동일한 위치로 리다이렉트 되어 루프에 빠지게된다. CloudFlare의 SSL/TLS 옵션을 &quot;전체(엄격)&quot; 옵션으로 변경하여 해당 이슈를 처리하였다.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-웹서버-dns-접속-불가-error-521-web-server-is-down-이슈">3. 웹서버 DNS 접속 불가 &quot;Error 521: Web server is down&quot; 이슈<a href="#3-웹서버-dns-접속-불가-error-521-web-server-is-down-이슈" class="hash-link" aria-label="Direct link to 3. 웹서버 DNS 접속 불가 &quot;Error 521: Web server is down&quot; 이슈" title="Direct link to 3. 웹서버 DNS 접속 불가 &quot;Error 521: Web server is down&quot; 이슈">​</a></h2><p>Vercel과 CloudFlare 연동이 완료된 이후, api 서버에 연동해두었던 도메인으로 접근시,  CloudFlare의 521 에러 페이지가 뜨는 이슈가 있었다. api 서버에 에러가 발생하여 NGINX 서비스가 down된 것으로 추정하여 ssh로 EC2 인스턴스에 접근하여 상태 확인 결과 docker 컨테이너와 NGINX 서비스 모두 정상적으로 동작하고 있었다.</p><p>해당 이슈의 원인은 Vercel과 CloudFlare 연동 이슈를 처리하면서 CloudFlare SSL/TLS 옵션을 &quot;전체(엄격)&quot; 옵션으로 변경한 것이었다. SSL/TLS 옵션을 &quot;전체(엄격)&quot;으로 사용하면, 엔드투엔드로 브라우저 - CloudFlare - 서버 전체 트래픽단을 암호화하기위해 CloudFlare가 제공하는 CA 인증서가 웹서버에 등록되어 있어야했다. </p><p>EC2 인스턴스에 /etc/ssl 디렉토리에 CloudFlare에서 제공하는 ssl 인증 pem 파일과 key 파일을 추가해두고, NGINX의 prod.conf 설정파일에 443 포트를 열어두고 ssl 관련 설정을 적용하여 해당 이슈를 처리하였다.</p><div class="language-vim codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-vim codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    listen   443;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl    on;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl_certificate    /etc/ssl/your_domain_name.pem;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ssl_certificate_key    /etc/ssl/your_domain_name.key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ....</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/TIL/docs/tags/aws">AWS</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/TIL/docs/tags/cloud-flare">CloudFlare</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/TIL/docs/tags/vercel">Vercel</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/TIL/docs/2023/2023-10/2023-10-21"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">2023-10-21</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/TIL/docs/events/구름 Commit - SRE"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">구름 Commit - SRE</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-nginx-도커-컨테이너-conf-적용-이슈" class="table-of-contents__link toc-highlight">1. NGINX 도커 컨테이너 conf 적용 이슈</a></li><li><a href="#2-vercel-배포시-dns-err_too_many_redirects-이슈" class="table-of-contents__link toc-highlight">2. Vercel 배포시 DNS &quot;err_too_many_redirects&quot; 이슈</a></li><li><a href="#3-웹서버-dns-접속-불가-error-521-web-server-is-down-이슈" class="table-of-contents__link toc-highlight">3. 웹서버 DNS 접속 불가 &quot;Error 521: Web server is down&quot; 이슈</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/TIL/assets/js/runtime~main.0e517ad4.js"></script>
<script src="/TIL/assets/js/main.58870c16.js"></script>
</body>
</html>